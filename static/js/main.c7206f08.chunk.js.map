{"version":3,"sources":["assets/car-wash.gif","assets/car-wash.png","firebase.js","components/MarkButton.js","App.js","index.js"],"names":["app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","firestore","getFirestore","MarkButton","_ref","loading","handleClick","todayStatus","console","log","status","undefined","menuProps","items","label","key","disabled","onClick","_ref2","keyPath","domEvent","_jsx","Dropdown","menu","trigger","children","_jsxs","Button","type","shape","size","SmileTwoTone","twoToneColor","CheckCircleTwoTone","CloseCircleTwoTone","DownOutlined","Title","Typography","App","allStatus","setAllStatus","useState","setLoading","startDate","moment","startOf","endDate","arrangementStart","date","peopleIndex","people","totalViews","todayPerson","weekViews","isBefore","endOf","today","format","dayISO","day","diff","isSame","Date","push","add","useEffect","async","querySnapshot","getDocs","collection","newData","forEach","doc","id","data","error","fetchData","find","s","className","Row","align","Col","xs","sm","md","lg","xl","src","carWashAnimated","style","width","Badge","Ribbon","text","Flex","vertical","justify","minHeight","level","newObject","clickedOption","docRefID","person","docRef","setDoc","prevData","itemIndex","findIndex","item","map","index","colSpan","Math","abs","week","i","j","carWashStatic","rootElement","document","getElementById","createRoot","render","StrictMode"],"mappings":"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","file":"static/js/main.c7206f08.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/car-wash.e4522bb0.gif\";","export default __webpack_public_path__ + \"static/media/car-wash.cddd208b.png\";","import { initializeApp } from \"firebase/app\";\nimport { getFirestore } from \"firebase/firestore\";\nimport { getAnalytics } from \"firebase/analytics\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyBLnjz1nTXh_fR9CBRW4CahMtalbvwLupc\",\n  authDomain: \"car-wash-group.firebaseapp.com\",\n  projectId: \"car-wash-group\",\n  storageBucket: \"car-wash-group.appspot.com\",\n  messagingSenderId: \"264083815693\",\n  appId: \"1:264083815693:web:624db999c2368ace6e4444\",\n  measurementId: \"G-0RYWCPLE1X\",\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nconst firestore = getFirestore(app);\n\nexport default firestore;\n","import React from \"react\";\nimport { Dropdown, Button } from \"antd\";\nimport {\n  DownOutlined,\n  CheckCircleTwoTone,\n  CloseCircleTwoTone,\n  SmileTwoTone\n} from \"@ant-design/icons\";\n\nconst MarkButton = ({ loading, handleClick, todayStatus }) => {\n  const handleMenuClick = ({ key, keyPath, domEvent }) => {\n    handleClick(key);\n  };\n  console.log(\"today status from button comp\", todayStatus);\n  const status = todayStatus === undefined ? null : todayStatus.status;\n\n  const items = [\n    {\n      label: \"会去洗\",\n      key: \"会去洗\",\n      disabled: status === \"会去洗\"\n    },\n    {\n      label: \"洗过了\",\n      key: \"洗过了\",\n      disabled: status === \"洗过了\"\n    },\n    {\n      label: \"不洗了\",\n      key: \"不洗了\",\n      disabled: status === \"不洗了\"\n    }\n  ];\n\n  const menuProps = {\n    items,\n    onClick: handleMenuClick\n  };\n\n  return (\n    <Dropdown menu={menuProps} loading={loading} trigger={[\"click\"]}>\n      <Button type={status ? \"default\" : \"primary\"} shape=\"round\" size=\"large\">\n        {status === \"会去洗\" && <SmileTwoTone twoToneColor=\"#0ca237\" />}\n        {status === \"洗过了\" && <CheckCircleTwoTone />}\n        {status === \"不洗了\" && <CloseCircleTwoTone twoToneColor=\"#ff0000\" />}\n        我今天{status || \"...\"}\n        <DownOutlined />\n      </Button>\n    </Dropdown>\n  );\n};\n\nexport default MarkButton;\n","import \"./styles.css\";\nimport React, { useState, useEffect } from \"react\";\nimport moment from \"moment\";\nimport carWashAnimated from \"./assets/car-wash.gif\";\nimport carWashStatic from \"./assets/car-wash.png\";\nimport { Col, Row, Flex, Typography, Badge } from \"antd\";\nconst { Title } = Typography;\nimport firestore from \"./firebase\";\nimport { collection, getDocs, doc, setDoc } from \"firebase/firestore\";\nimport MarkButton from \"./components/MarkButton\";\n\nexport default function App() {\n  const [allStatus, setAllStatus] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  const startDate = moment().startOf(\"week\");\n  const endDate = moment(\"2024-03-12\");\n  const arrangementStart = {\n    date: moment(\"2023-12-07\"),\n    peopleIndex: 0\n  };\n  const people = [\"Henry\", \"Vivian\", \"Ken\", \"Leo\", \"Nana\"];\n  const totalViews = [];\n  let weekViews = [];\n  let todayPerson;\n  while (startDate.isBefore(moment(endDate).endOf(\"week\"))) {\n    // const currentDate = startDate.add(1, \"days\");\n    const today = {\n      date: startDate.format(\"YYYY-MM-DD\"),\n      dayISO: startDate.format(\"ddd\"),\n      day: startDate.day(),\n      people: startDate.isBefore(moment(endDate))\n        ? people[startDate.diff(arrangementStart.date, \"day\") % 5]\n        : null\n    };\n    if (moment(today.date).isSame(new Date(), \"day\")) {\n      todayPerson = today.people;\n    }\n    weekViews.push(today);\n    if (today.day === 6) {\n      totalViews.push(weekViews);\n      weekViews = [];\n    }\n    startDate.add(1, \"days\");\n  }\n\n  useEffect(() => {\n    // Example: Fetch data from Firestore\n    const fetchData = async () => {\n      try {\n        const querySnapshot = await getDocs(\n          collection(firestore, \"calendarMark\")\n        );\n        const newData = [];\n        querySnapshot.forEach((doc) => {\n          newData.push({ id: doc.id, ...doc.data() });\n        });\n        setAllStatus(newData);\n        console.log(\"data from fb\", newData);\n      } catch (error) {\n        console.error(\"Error fetching data: \", error);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  const updateData = (newObject) => {\n    setAllStatus((prevData) => {\n      const itemIndex = prevData.findIndex((item) => item.id === newObject.id);\n\n      if (itemIndex !== -1) {\n        // If the item exists, update it\n        return prevData.map((item, index) =>\n          index === itemIndex ? { ...newObject } : item\n        );\n      } else {\n        // If the item doesn't exist, add it to the array\n        return [...prevData, newObject];\n      }\n    });\n  };\n\n  const addDataToFirestore = async (clickedOption) => {\n    if (!todayPerson || !clickedOption) {\n      return;\n    }\n    try {\n      setLoading(true);\n      const docRefID = moment().format(\"YYYYMMDD\");\n      const data = {\n        date: moment().format(\"YYYY-MM-DD\"),\n        person: todayPerson || \"\",\n        status: clickedOption\n      };\n      // Add the data to Firestore\n      const docRef = doc(collection(firestore, \"calendarMark\"), docRefID);\n      await setDoc(docRef, data);\n      updateData({ id: docRefID, ...data });\n      console.log(\"Document written with ID: \", docRef.id);\n    } catch (error) {\n      console.error(\"Error adding document: \", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const todayStatus = allStatus.find(\n    (s) => s.id === moment().format(\"YYYYMMDD\")\n  );\n\n  return (\n    <div className=\"App\">\n      <Row align=\"middle\">\n        <Col xs={24} sm={24} md={24} lg={12} xl={12}>\n          <img src={carWashAnimated} style={{ width: \"100%\" }} />\n        </Col>\n        <Col xs={24} sm={24} md={24} lg={12} xl={12}>\n          <Badge.Ribbon text={moment().format(\"LL\")}>\n            <Flex\n              vertical={\"vertical\"}\n              justify=\"center\"\n              align=\"center\"\n              style={{ minHeight: \"280px\" }}\n            >\n              <Title level={4}>今天洗车的是</Title>\n              <Title>{todayPerson}</Title>\n              <MarkButton\n                loading={loading}\n                handleClick={addDataToFirestore}\n                todayStatus={todayStatus}\n              />\n            </Flex>\n          </Badge.Ribbon>\n        </Col>\n      </Row>\n      <h3></h3>\n      <table>\n        <thead>\n          <tr>\n            <th colSpan={7}>\n              Days remaining: {Math.abs(moment().diff(endDate, \"days\"))}\n            </th>\n          </tr>\n          <tr>\n            <th>Sun</th>\n            <th>Mon</th>\n            <th>Tue</th>\n            <th>Wed</th>\n            <th>Thu</th>\n            <th>Fri</th>\n            <th>Sat</th>\n          </tr>\n        </thead>\n        <tbody>\n          {totalViews.map((week, i) => (\n            <tr key={i}>\n              {week.map((day, j) => (\n                <td\n                  key={j}\n                  className={\n                    moment(day.date).isSame(moment(), \"day\")\n                      ? \"active\"\n                      : moment(day.date).isBefore(moment())\n                      ? \"past\"\n                      : \"future\"\n                  }\n                >\n                  <div className=\"day\">\n                    <div className=\"header\">\n                      {moment(day.date).format(\"MMM DD\")}\n                    </div>\n                    <div className=\"icon\">\n                      <img src={carWashStatic} />\n                    </div>\n                    <div className=\"people\">{day.people}</div>\n                  </div>\n                </td>\n              ))}\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n","import { StrictMode } from \"react\";\nimport { createRoot } from \"react-dom/client\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nconst root = createRoot(rootElement);\n\nroot.render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n);\n"],"sourceRoot":""}